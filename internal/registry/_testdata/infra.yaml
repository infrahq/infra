secrets:
  - name: base64
    kind: plaintext
    base64: true

providers:
  - kind: okta
    domain: overwrite.example.com
    clientID: base64:MG9hcG4wcXdpUVBpTUl5UjM1ZDY=
    clientSecret: kubernetes:okta-secrets/clientSecret
    apiToken: kubernetes:okta-secrets/apiToken
  - kind: okta
    domain: https://test.example.com
    clientID: plaintext:0oapn0qwiQPiMIyR35d6
    clientSecret: kubernetes:okta-secrets/clientSecret
    apiToken: kubernetes:okta-secrets/apiToken

groups:
  - name: ios-developers
    provider: okta
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-AAA
            kind: kubernetes
      - name: audit
        kind: cluster-role
        destinations:
          - name: cluster-CCC
            kind: kubernetes
            namespaces:
              - infrahq
              - development
      - name: pod-create
        kind: role
        destinations:
          - name: cluster-CCC
            kind: kubernetes
            namespaces:
              - infrahq
  - name: mac-admins
    provider: okta
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-BBB
            kind: kubernetes
  - name: adversaries
    provider: outside
    roles:
      - name: cluster-admin
        kind: cluster-role
        destinations:
          - name: cluster-AAA
            kind: kubernetes
  - name: heroes
    provider: okta
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-CCC
            kind: kubernetes
  - name: villains
    provider: okta
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-CCC
            kind: kubernetes

users:
  - email: admin@example.com
    roles:
      - name: admin
        kind: cluster-role
        destinations:
          - labels:
              - kubernetes
            kind: kubernetes
      - name: audit
        kind: cluster-role
        destinations:
          - name: cluster-CCC
            namespaces:
              - infrahq
              - development
            kind: kubernetes
      - name: pod-create
        kind: role
        destinations:
          - name: cluster-CCC
            namespaces:
              - infrahq
            kind: kubernetes
      - name: view
        kind: role
        destinations:
          - labels:
              - us-west-1
              - us-east-1
            namespaces:
              - infrahq
            kind: kubernetes
  - email: unknown@example.com
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-AAA
            kind: kubernetes
