secrets:
  - name: base64
    kind: plaintext
    base64: true

providers:
  - kind: okta
    domain: overwrite.example.com
    client-id: base64:MG9hcG4wcXdpUVBpTUl5UjM1ZDY=
    client-secret: kubernetes:okta-secrets/clientSecret
    okta:
      api-token: kubernetes:okta-secrets/apiToken
  - kind: okta
    domain: https://test.example.com
    client-id: plaintext:0oapn0qwiQPiMIyR35d6
    client-secret: kubernetes:okta-secrets/clientSecret
    okta:
      api-token: kubernetes:okta-secrets/apiToken

groups:
  - name: ios-developers
    provider: okta
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-AAA
      - name: audit
        kind: cluster-role
        destinations:
          - name: cluster-CCC
            namespaces:
              - infrahq
              - development
      - name: pod-create
        kind: role
        destinations:
          - name: cluster-CCC
            namespaces:
              - infrahq
  - name: mac-admins
    provider: okta
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-BBB
  - name: adversaries
    provider: outside
    roles:
      - name: cluster-admin
        kind: cluster-role
        destinations:
          - name: cluster-AAA
  - name: heroes
    provider: okta
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-CCC
  - name: villains
    provider: okta
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-CCC

users:
  - email: admin@example.com
    roles:
      - name: admin
        kind: cluster-role
        destinations:
          - name: cluster-AAA
          - name: cluster-BBB
      - name: audit
        kind: cluster-role
        destinations:
          - name: cluster-CCC
            namespaces:
              - infrahq
              - development
      - name: pod-create
        kind: role
        destinations:
          - name: cluster-CCC
            namespaces:
              - infrahq
  - email: unknown@example.com
    roles:
      - name: writer
        kind: cluster-role
        destinations:
          - name: cluster-AAA
