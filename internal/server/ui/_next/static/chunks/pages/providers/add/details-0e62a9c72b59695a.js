(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{1035:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/providers/add/details",function(){return t(4852)}])},5686:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(5893);function a(e){var r=e.message,t=e.center,a=void 0!==t&&t;return(0,n.jsx)("p",{className:"".concat(a?"mt-2 text-center":"mb-1"," text-xs text-pink-500"),children:r})}},3701:function(e,r,t){"use strict";t.d(r,{a:function(){return n},p:function(){return a}});var n=[{name:"Okta",kind:"okta",available:!0},{name:"Google",kind:"google"},{name:"Azure Active Directory",kind:"azure-ad"},{name:"GitHub",kind:"github"},{name:"GitLab",kind:"gitlab"},{name:"OpenID",kind:"openid"}];function a(e){return(null===e||void 0===e?void 0:e.endsWith(".okta.com"))?"okta":""}},4852:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return v}});var n=t(4051),a=t.n(n),s=t(5893),i=t(7294),o=t(1163),c=t(9008),u=t(1664),l=t(8100),d=t(3701),p=t(3688),f=t(5686);function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function m(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(u){return void t(u)}o.done?r(c):Promise.resolve(c).then(n,a)}function b(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){m(s,n,a,i,o,"next",e)}function o(e){m(s,n,a,i,o,"throw",e)}i(void 0)}))}}function h(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return x(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(){var e=(0,o.useRouter)(),r=e.query.kind,t=(0,l.kY)().mutate,n=(0,i.useState)(""),p=n[0],x=n[1],m=(0,i.useState)(""),v=m[0],y=m[1],g=(0,i.useState)(""),j=g[0],k=g[1],N=(0,i.useState)(""),w=N[0],S=N[1],C=(0,i.useState)({}),_=C[0],A=C[1],E=(0,i.useState)(r),I=E[0],O=E[1];if(!d.a.find((function(e){return e.name.toLowerCase()===r})))return e.replace("/providers/add"),null;function D(){return D=b(a().mark((function r(n){var s,i,o,c,u,l,d;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),A({}),S(""),r.prev=3,r.next=6,t("/v1/providers",function(){var e=b(a().mark((function e(r){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/v1/providers",{method:"POST",body:JSON.stringify({name:I,url:p,clientID:v,clientSecret:j})});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw n;case 8:return e.abrupt("return",h(r||[]).concat([n]));case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 6:r.next=34;break;case 8:if(r.prev=8,r.t0=r.catch(3),!r.t0.fieldErrors){r.next=32;break}for(s={},i=!0,o=!1,c=void 0,r.prev=13,u=r.t0.fieldErrors[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)d=l.value,s[d.fieldName.toLowerCase()]=d.errors[0]||"invalid value";r.next=21;break;case 17:r.prev=17,r.t1=r.catch(13),o=!0,c=r.t1;case 21:r.prev=21,r.prev=22,i||null==u.return||u.return();case 24:if(r.prev=24,!o){r.next=27;break}throw c;case 27:return r.finish(24);case 28:return r.finish(21);case 29:A(s),r.next=33;break;case 32:S(r.t0.message);case 33:return r.abrupt("return",!1);case 34:return e.replace("/providers"),r.abrupt("return",!1);case 36:case"end":return r.stop()}}),r,null,[[3,8],[13,17,21,29],[22,,24,28]])}))),D.apply(this,arguments)}return(0,s.jsxs)("div",{className:"pt-8 px-3 pb-3",children:[(0,s.jsx)(c.default,{children:(0,s.jsxs)("title",{children:["Add Identity Provider - ",r]})}),(0,s.jsxs)("header",{className:"flex flex-row px-2 items-center",children:[(0,s.jsx)("img",{src:"/providers.svg",className:"w-6 h-6 mr-2 mt-0.5"}),(0,s.jsxs)("h1",{className:"text-2xs capitalize",children:["Connect ",r]})]}),(0,s.jsxs)("form",{onSubmit:function(e){return D.apply(this,arguments)},className:"flex flex-col mt-12",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("label",{className:"text-3xs text-gray-400 uppercase",children:"Name your provider"}),(0,s.jsx)("input",{required:!0,autoFocus:!0,placeholder:"choose a name for your identity provider",onChange:function(e){return O(e.target.value)},className:"w-full bg-transparent border-b border-gray-800 text-3xs px-px py-3 focus:outline-none focus:border-b focus:border-gray-200 placeholder:italic ".concat(_.name?"border-pink-500/60":"")}),_.name&&(0,s.jsx)(f.Z,{message:_.name})]}),(0,s.jsxs)("label",{className:"text-2xs text-white/90",children:["Additional details ",(0,s.jsx)("a",{className:"text-violet-100 underline",target:"_blank",href:"https://infrahq.com/docs/guides/identity-providers/okta",rel:"noreferrer",children:"learn more"})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"text-3xs text-gray-400 uppercase",children:"URL (Domain)"}),(0,s.jsx)("input",{required:!0,placeholder:"domain or URL",value:p,onChange:function(e){return x(e.target.value)},className:"w-full bg-transparent border-b border-gray-800 text-3xs px-px py-3 focus:outline-none focus:border-b focus:border-gray-200 placeholder:italic ".concat(_.url?"border-pink-500/60":"")}),_.url&&(0,s.jsx)(f.Z,{message:_.url})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"text-3xs text-gray-400 uppercase",children:"Client ID"}),(0,s.jsx)("input",{required:!0,placeholder:"client ID",value:v,onChange:function(e){return y(e.target.value)},className:"w-full bg-transparent border-b border-gray-800 text-3xs px-px py-3 focus:outline-none focus:border-b focus:border-gray-200 placeholder:italic ".concat(_.clientid?"border-pink-500/60":"")}),_.clientid&&(0,s.jsx)(f.Z,{message:_.clientid})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"text-3xs text-gray-400 uppercase",children:"Client Secret"}),(0,s.jsx)("input",{required:!0,type:"password",placeholder:"client secret",value:j,onChange:function(e){return k(e.target.value)},className:"w-full bg-transparent border-b border-gray-800 text-3xs px-px py-3 focus:outline-none focus:border-b focus:border-gray-200 placeholder:italic ".concat(_.clientsecret?"border-pink-500/60":"")}),_.clientsecret&&(0,s.jsx)(f.Z,{message:_.clientsecret})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-end mt-6 items-center",children:[(0,s.jsx)(u.default,{href:"/providers",children:(0,s.jsx)("a",{className:"uppercase border-0 hover:text-white px-6 py-3 focus:outline-none focus:text-white text-gray-400 text-2xs",children:"Cancel"})}),(0,s.jsx)("button",{type:"submit",disabled:!I||!p||!v||!j,className:"border border-violet-300 text-2xs text-violet-100 rounded-md px-5 py-2.5 text-center disabled:opacity-30",children:"Connect Provider"})]}),w&&(0,s.jsx)(f.Z,{message:w,center:!0})]})]})}v.layout=function(e){return(0,s.jsx)(p.Z,{backHref:"/providers/add",closeHref:"/providers",children:e})}}},function(e){e.O(0,[700,774,888,179],(function(){return r=1035,e(e.s=r);var r}));var r=e.O();_N_E=r}]);