(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{1035:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/providers/add/details",function(){return t(3255)}])},3701:function(e,r,t){"use strict";t.d(r,{a:function(){return n},p:function(){return a}});var n=[{name:"Okta",kind:"okta",available:!0},{name:"Google",kind:"google"},{name:"Azure Active Directory",kind:"azure-ad"},{name:"GitHub",kind:"github"},{name:"GitLab",kind:"gitlab"},{name:"OpenID",kind:"openid"}];function a(e){return(null===e||void 0===e?void 0:e.endsWith(".okta.com"))?"okta":""}},3255:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return v}});var n=t(4051),a=t.n(n),i=t(5893),o=t(7294),s=t(1163);var c=o.forwardRef((function(e,r){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"}))})),u=t(9008),l=t(8100),d=t(6389),p=t(3701);function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function f(e,r,t,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void t(u)}s.done?r(c):Promise.resolve(c).then(n,a)}function x(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var i=e.apply(r,t);function o(e){f(i,n,a,o,s,"next",e)}function s(e){f(i,n,a,o,s,"throw",e)}o(void 0)}))}}function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(){var e=(0,s.useRouter)(),r=e.query.kind,t=(0,l.kY)().mutate,n=(0,o.useState)(r),m=n[0],f=n[1],v=(0,o.useState)(""),b=v[0],g=v[1],k=(0,o.useState)(""),y=k[0],j=k[1],w=(0,o.useState)(""),N=w[0],S=w[1],A=(0,o.useState)(""),C=A[0],_=A[1],E=(0,o.useState)({}),I=E[0],O=E[1];if(!p.a.find((function(e){return e.name.toLowerCase()===r})))return e.replace("/providers/add"),null;function P(){return P=x(a().mark((function r(n){var i,o,s,c,u,l,d;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,O({}),_(""),r.next=6,t("/v1/providers",function(){var e=x(a().mark((function e(r){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/v1/providers",{method:"POST",body:JSON.stringify({name:m,url:b,clientID:y,clientSecret:N})});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw n;case 8:return e.abrupt("return",h(r||[]).concat([n]));case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 6:r.next=34;break;case 8:if(r.prev=8,r.t0=r.catch(1),!r.t0.fieldErrors){r.next=32;break}for(i={},o=!0,s=!1,c=void 0,r.prev=13,u=r.t0.fieldErrors[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)d=l.value,i[d.fieldName.toLowerCase()]=d.errors[0]||"invalid value";r.next=21;break;case 17:r.prev=17,r.t1=r.catch(13),s=!0,c=r.t1;case 21:r.prev=21,r.prev=22,o||null==u.return||u.return();case 24:if(r.prev=24,!s){r.next=27;break}throw c;case 27:return r.finish(24);case 28:return r.finish(21);case 29:O(i),r.next=33;break;case 32:_(r.t0.message);case 33:return r.abrupt("return",!1);case 34:return e.replace("/providers"),r.abrupt("return",!1);case 36:case"end":return r.stop()}}),r,null,[[1,8],[13,17,21,29],[22,,24,28]])}))),P.apply(this,arguments)}return(0,i.jsxs)(d.Z,{backHref:"/providers/add",closeHref:"/providers",children:[(0,i.jsx)(u.default,{children:(0,i.jsxs)("title",{children:["Add Identity Provider - ",r]})}),(0,i.jsxs)("div",{className:"flex flex-col mb-10 w-full max-w-sm",children:[(0,i.jsx)("h1",{className:"text-xl font-bold tracking-tight text-center",children:"Add Identity Provider"}),(0,i.jsx)("h2",{className:"mt-1 mb-10 text-gray-300 text-center",children:"Provide your identity provider's details."}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 mx-auto select-none",children:[(0,i.jsx)("img",{className:"h-4",src:"/providers/".concat(r,".svg")}),(0,i.jsx)(c,{className:"w-4 h-4 text-gray-500"}),(0,i.jsx)("img",{src:"/icon-light.svg"})]}),(0,i.jsxs)("form",{onSubmit:function(e){return P.apply(this,arguments)},className:"flex flex-col my-12",children:[(0,i.jsx)("label",{className:"text-xs",htmlFor:"name",children:"Choose a name"}),(0,i.jsx)("input",{required:!0,autoFocus:!0,placeholder:"Name",onChange:function(e){return f(e.target.value)},className:"bg-purple-100/5 border border-zinc-800 text-sm px-4 mt-2 py-2.5 rounded-lg focus:outline-none focus:ring focus:ring-cyan-600 ".concat(I.name?"border-pink-500":"")}),I.name&&(0,i.jsx)("p",{className:"px-4 mb-1 text-sm text-pink-500",children:I.name}),(0,i.jsxs)("label",{className:"text-xs mt-4",htmlFor:"name",children:["Additional details (",(0,i.jsx)("a",{className:"text-cyan-400 underline",target:"_blank",href:"https://infrahq.com/docs/guides/identity-providers/okta",rel:"noreferrer",children:"learn more"}),") "]}),(0,i.jsx)("input",{required:!0,placeholder:"URL (Domain)",value:b,onChange:function(e){return g(e.target.value)},className:"bg-purple-100/5 border border-zinc-800 text-sm px-4 mt-2 py-2.5 rounded-lg focus:outline-none focus:ring focus:ring-cyan-600 ".concat(I.url?"border-pink-500":"")}),I.url&&(0,i.jsx)("p",{className:"px-4 mb-1 text-sm text-pink-500",children:I.url}),(0,i.jsx)("input",{required:!0,placeholder:"Client ID",value:y,onChange:function(e){return j(e.target.value)},className:"bg-purple-100/5 border border-zinc-800 text-sm px-4 mt-2 py-2.5 rounded-lg focus:outline-none focus:ring focus:ring-cyan-600 ".concat(I.clientid?"border-pink-500":"")}),I.clientid&&(0,i.jsx)("p",{className:"px-4 mb-1 text-sm text-pink-500",children:I.clientid}),(0,i.jsx)("input",{required:!0,type:"password",value:N,onChange:function(e){return S(e.target.value)},placeholder:"Client Secret",className:"bg-purple-100/5 border border-zinc-800 text-sm px-4 mt-2 py-2.5 rounded-lg focus:outline-none focus:ring focus:ring-cyan-600 ".concat(I.clientsecret?"border-pink-500":"")}),I.clientsecret&&(0,i.jsx)("p",{className:"px-4 mb-1 text-sm text-pink-500",children:I.clientsecret}),(0,i.jsx)("button",{type:"submit",className:"bg-gradient-to-tr from-indigo-300 to-pink-100 hover:from-indigo-200 hover:to-pink-50 rounded-full p-0.5 w-full mt-6 text-center",children:(0,i.jsx)("div",{className:"bg-black rounded-full tracking-tight text-sm px-6 py-3 ",children:"Add Identity Provider"})}),C&&(0,i.jsx)("p",{className:"mt-2 text-sm text-pink-500 text-center",children:C})]})]})]})}}},function(e){e.O(0,[389,774,888,179],(function(){return r=1035,e(e.s=r);var r}));var r=e.O();_N_E=r}]);