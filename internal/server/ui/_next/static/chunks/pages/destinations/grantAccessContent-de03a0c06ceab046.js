(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{7139:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/destinations/grantAccessContent",function(){return t(6289)}])},5686:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893);function i(e){var n=e.message,t=e.center,i=void 0!==t&&t;return(0,r.jsx)("p",{className:"".concat(i?"mt-2 text-center":"px-4 mb-1"," text-sm text-pink-500"),children:n})}},3783:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893);function i(e){var n=e.label,t=e.type,i=e.value,a=e.placeholder,o=e.error,c=e.hasDropdownSelection,s=void 0===c||c,l=e.optionType,u=e.options,d=e.handleInputChange,f=e.handleSelectOption,h=e.handleKeyDown;return(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-white",children:n}),(0,r.jsxs)("div",{className:"relative rounded shadow-sm",children:[(0,r.jsx)("input",{type:t,value:i,className:"block w-full px-4 py-3 sm:text-sm border-2 bg-transparent rounded-full focus:outline-none focus:ring focus:ring-cyan-600 ".concat(o?"border-pink-500":"border-gray-800"),placeholder:a,onChange:d,onKeyDown:h}),s&&(0,r.jsxs)("div",{className:"absolute inset-y-0 right-2 flex items-center",children:[(0,r.jsx)("label",{htmlFor:l,className:"sr-only",children:l}),(0,r.jsx)("select",{id:l,name:l,onChange:f,className:"h-full py-0 pl-2 border-transparent bg-transparent text-white text-sm focus:outline-none",children:u.map((function(e){return(0,r.jsx)("option",{value:e,children:e},e)}))})]})]})]})}},8324:function(e,n,t){"use strict";t.d(n,{o:function(){return r}});var r=function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}},6289:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var r=t(5893),i=t(8100),a=t(7294),o=t(8324),c=t(3783),s=t(5686);function l(e){var n=e.id,t=(0,i.ZP)("/v1/identities/".concat(n.replace("i:","")),{fallbackData:{name:""}}).data;return(0,r.jsx)("p",{children:t.name})}function u(e){var n=e.id,t=(0,i.ZP)("/v1/destinations/".concat(n)).data,u=(0,i.ZP)((function(){return"/v1/grants?resource=".concat(t.name)})).data,d=(0,i.kY)().mutate,f=(0,a.useState)(""),h=f[0],m=f[1],p=(0,a.useState)(""),v=p[0],x=p[1],g=(0,a.useState)("view"),b=g[0],j=g[1],y=["view","edit","admin","remove"],N=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;fetch("/v1/grants",{method:"POST",body:JSON.stringify({subject:e,resource:t.name,privilege:n})}).then((function(e){return e.json()})).then((function(){return d("/v1/grants?resource=".concat(t.name))})).finally((function(){return m("")}))},w=function(){(0,o.o)(h)?(x(""),fetch("/v1/identities?name=".concat(h)).then((function(e){return e.json()})).then((function(e){0===e.length?fetch("/v1/identities",{method:"POST",body:JSON.stringify({name:h,kind:"user"})}).then((function(e){return e.json()})).then((function(e){return N("i:"+e.id)})).finally((function(){return m("")})):N(e[0].id)})).catch((function(e){return console.error(e)}))):x("Invalid email")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-1 mt-3 ".concat(v?"mb-2":"mb-8"),children:[(0,r.jsx)("div",{className:"flex-2 w-full",children:(0,r.jsx)(c.Z,{type:"email",value:h,placeholder:"email",optionType:"role",options:y.filter((function(e){return"remove"!==e})),handleInputChange:function(e){return n=e.target.value,m(n),void x("");var n},handleSelectOption:function(e){return j(e.target.value)},handleKeyDown:function(e){"Enter"===e.key&&h.length>0&&w()},error:v})}),(0,r.jsx)("button",{onClick:function(){return w()},disabled:0===h.length,type:"button",className:"bg-gradient-to-tr from-indigo-300 to-pink-100 rounded-full hover:from-indigo-200 hover:to-pink-50 p-0.5 mx-auto disabled:opacity-30",children:(0,r.jsx)("div",{className:"bg-black flex items-center text-sm rounded-full px-12 py-3",children:"Share"})})]}),v&&(0,r.jsx)(s.Z,{message:v}),u&&u.length>0&&(0,r.jsx)("section",{className:"py-2",children:u.map((function(e){return(0,r.jsxs)("div",{className:"flex justify-between items-center px-4",children:[(0,r.jsx)(l,{id:e.subject}),(0,r.jsx)("div",{children:(0,r.jsx)("select",{id:"role",name:"role",className:"w-full pl-3 pr-1 py-2 border-gray-300 focus:outline-none sm:text-sm bg-transparent",defaultValue:e.privilege,onChange:function(n){return r=n.target.value,i=e.id,a=e.subject,void fetch("/v1/grants/".concat(i),{method:"DELETE"}).then((function(){"remove"===r?d("/v1/grants?resource=".concat(t.name)):N(a,r)}));var r,i,a},children:y.map((function(e){return(0,r.jsx)("option",{value:e,children:e},e)}))})})]},e.id)}))})]})}}},function(e){e.O(0,[774,888,179],(function(){return n=7139,e(e.s=n);var n}));var n=e.O();_N_E=n}]);