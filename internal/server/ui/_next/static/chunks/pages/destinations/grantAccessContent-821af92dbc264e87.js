(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{7139:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/destinations/grantAccessContent",function(){return t(6289)}])},8468:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893);function i(e){var n=e.label,t=e.type,i=e.value,o=e.placeholder,a=e.hasDropdownSelection,c=void 0===a||a,l=e.optionType,s=e.options,u=e.handleInputChange,d=e.handleSelectOption,f=e.handleKeyDown;return(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-white",children:n}),(0,r.jsxs)("div",{className:"relative rounded shadow-sm",children:[(0,r.jsx)("input",{type:t,value:i,className:"block w-full px-4 py-3 sm:text-sm border-2 border-gray-800 bg-transparent rounded-full focus:outline-none focus:ring focus:ring-cyan-600",placeholder:o,onChange:u,onKeyDown:f}),c&&(0,r.jsxs)("div",{className:"absolute inset-y-0 right-2 flex items-center",children:[(0,r.jsx)("label",{htmlFor:l,className:"sr-only",children:l}),(0,r.jsx)("select",{id:l,name:l,onChange:d,className:"h-full py-0 pl-2 border-transparent bg-transparent text-white text-sm focus:outline-none",children:s.map((function(e){return(0,r.jsx)("option",{value:e,children:e},e)}))})]})]})]})}},8324:function(e,n,t){"use strict";t.d(n,{o:function(){return r}});var r=function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}},6289:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var r=t(5893),i=t(8100),o=t(7294),a=t(2125),c=t(8468),l=t(8324);function s(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function u(){var e=s(["\n  max-height: 20rem;\n  overflow: auto;\n  width: 95%;\n  padding: 0 1.25rem;\n"]);return u=function(){return e},e}function d(){var e=s(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n"]);return d=function(){return e},e}var f=a.ZP.section.withConfig({componentId:"sc-b2212e91-0"})(u()),h=a.ZP.div.withConfig({componentId:"sc-b2212e91-1"})(d()),m=function(e){var n=e.id;console.log("id:",n),console.log(n.replace("i:",""));var t=(0,i.ZP)("/v1/identities/".concat(n.replace("i:","")),{fallbackData:{name:""}}).data;return(0,r.jsx)("p",{children:t.name})};function p(e){var n=e.id,t=["view","edit","admin","remove"],a=(0,i.ZP)("/v1/destinations/".concat(n)).data,s=(0,i.ZP)((function(){return"/v1/grants?resource=".concat(a.name)})).data,u=(0,i.kY)().mutate,d=(0,o.useState)(""),p=d[0],v=d[1],g=(0,o.useState)("view"),x=g[0],b=g[1],j=(0,o.useState)(""),y=j[0],w=j[1],N=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;fetch("/v1/grants",{method:"POST",body:JSON.stringify({subject:e,resource:a.name,privilege:n})}).then((function(e){return e.json()})).then((function(){u("/v1/grants?resource=".concat(a.name))})).finally((function(){v("")}))},k=function(){(0,l.o)(p)?(w(""),fetch("/v1/identities?name=".concat(p)).then((function(e){return e.json()})).then((function(e){0===e.length?fetch("/v1/identities",{method:"POST",body:JSON.stringify({name:p,kind:"user"})}).then((function(e){return e.json()})).then((function(e){console.log("user id:",e.id),console.log("i:"+e.id),N("i:"+e.id)})).finally((function(){v("")})):N(e[0].id)})).catch((function(e){console.log(e)}))):w("Invalid email")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-1 mt-3 ".concat(y?"mb-2":"mb-8"),children:[(0,r.jsx)("div",{className:"flex-2 w-full",children:(0,r.jsx)(c.Z,{type:"email",value:p,placeholder:"email",optionType:"role",options:t.filter((function(e){return"remove"!==e})),handleInputChange:function(e){return n=e.target.value,v(n),void w("");var n},handleSelectOption:function(e){return b(e.target.value)},handleKeyDown:function(e){"Enter"===e.key&&p.length>0&&k()}})}),(0,r.jsx)("button",{onClick:function(){return k()},disabled:0===p.length,type:"button",className:"bg-gradient-to-tr from-indigo-300 to-pink-100 rounded-full hover:from-indigo-200 hover:to-pink-50 p-0.5 mx-auto",children:(0,r.jsx)("div",{className:"bg-black flex items-center text-sm rounded-full px-12 py-3",children:"Share"})})]}),y&&(0,r.jsx)("p",{className:"text-sm text-pink-500",children:y}),s&&s.length>0&&(0,r.jsx)(f,{children:s.map((function(e){return(0,r.jsxs)(h,{children:[(0,r.jsx)(m,{id:e.subject}),(0,r.jsx)("div",{children:(0,r.jsx)("select",{id:"role",name:"role",className:"w-full pl-3 pr-1 py-2 border-gray-300 focus:outline-none sm:text-sm bg-transparent",defaultValue:e.privilege,onChange:function(n){return t=n.target.value,r=e.id,i=e.subject,console.log("handle grant update:",i),void fetch("/v1/grants/".concat(r),{method:"DELETE"}).then((function(){"remove"===t?u("/v1/grants?resource=".concat(a.name)):N(i,t)}));var t,r,i},children:t.map((function(e){return(0,r.jsx)("option",{value:e,children:e},e)}))})})]},e.id)}))})]})}}},function(e){e.O(0,[125,774,888,179],(function(){return n=7139,e(e.s=n);var n}));var n=e.O();_N_E=n}]);