(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{9139:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return n(3006)}])},2382:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893);function s(e){var t=e.iconPath,n=e.width,s=void 0===n?8:n,a=e.position;return(0,r.jsx)("div",{className:"flex items-center justify-center bg-gradient-to-br from-violet-400/30 to-pink-200/30 rounded-full ".concat("center"===a?"mx-auto my-4":""),children:(0,r.jsx)("div",{className:"flex bg-black items-center justify-center rounded-full w-16 h-16 m-0.5",children:(0,r.jsx)("img",{className:"w-".concat(s," h-").concat(s),src:t})})})}},3006:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(4051),s=n.n(r),a=n(5893),o=n(7294),i=n(8100),c=n(1163),u=n(2382);function l(e,t,n,r,s,a,o){try{var i=e[a](o),c=i.value}catch(u){return void n(u)}i.done?t(c):Promise.resolve(c).then(r,s)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){l(a,r,s,o,i,"next",e)}function i(e){l(a,r,s,o,i,"throw",e)}o(void 0)}))}}function f(){var e=(0,o.useState)(""),t=e[0],n=e[1],r=(0,o.useState)(""),l=r[0],f=r[1],m=(0,o.useState)({}),p=m[0],x=m[1],h=(0,o.useState)(""),v=h[0],b=h[1],w=(0,i.kY)().mutate,g=(0,c.useRouter)();function y(){return(y=d(s().mark((function e(n){var r,a,o,i,c,u,d,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),x({}),b(""),e.prev=3,e.next=6,fetch("/v1/signup",{method:"POST",body:JSON.stringify({email:t,password:l})});case 6:if((r=e.sent).ok){e.next=11;break}return e.next=10,r.json();case 10:throw e.sent;case 11:return console.log(t,l),e.next=14,fetch("/v1/login",{method:"POST",body:JSON.stringify({passwordCredentials:{email:t,password:l}})});case 14:if((r=e.sent).ok){e.next=19;break}return e.next=18,r.json();case 18:throw e.sent;case 19:w("/v1/introspect",{optimisticData:{name:t}}),w("/v1/signup",{optimisticData:{enabled:!1}}),g.replace("/"),e.next=49;break;case 24:if(e.prev=24,e.t0=e.catch(3),!e.t0.fieldErrors){e.next=48;break}for(a={},o=!0,i=!1,c=void 0,e.prev=29,u=e.t0.fieldErrors[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)f=d.value,a[f.fieldName.toLowerCase()]=f.errors[0]||"invalid value";e.next=37;break;case 33:e.prev=33,e.t1=e.catch(29),i=!0,c=e.t1;case 37:e.prev=37,e.prev=38,o||null==u.return||u.return();case 40:if(e.prev=40,!i){e.next=43;break}throw c;case 43:return e.finish(40);case 44:return e.finish(37);case 45:x(a),e.next=49;break;case 48:b(e.t0.message);case 49:return e.abrupt("return",!1);case 50:case"end":return e.stop()}}),e,null,[[3,24],[29,33,37,45],[38,,40,44]])})))).apply(this,arguments)}return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-full w-full max-w-md mx-auto mb-48",children:[(0,a.jsx)(u.Z,{width:12,iconPath:"/infra-color.svg"}),(0,a.jsx)("h1",{className:"mt-5 text-md font-bold",children:"Welcome to Infra"}),(0,a.jsxs)("h2",{className:"text-sm text-center max-w-xs my-2 text-gray-400",children:["You've successfully installed Infra.",(0,a.jsx)("br",{}),"Set up your admin user to get started."]}),(0,a.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},className:"flex flex-col w-full max-w-sm my-8",children:[(0,a.jsx)("input",{autoFocus:!0,type:"email",placeholder:"Email",onChange:function(e){return n(e.target.value)},className:"bg-purple-100/5 border border-zinc-800 text-sm px-5 mt-2 py-3 rounded-full focus:outline-none focus:ring focus:ring-cyan-600 ".concat(p.email?"border-pink-500":"")}),p.email&&(0,a.jsx)("p",{className:"px-4 mb-1 text-sm text-pink-500",children:p.email}),(0,a.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){return f(e.target.value)},className:"bg-purple-100/5 border border-zinc-800 text-sm px-5 mt-2 py-3 rounded-full focus:outline-none focus:ring focus:ring-cyan-600 ".concat(p.password?"border-pink-500":"")}),p.password&&(0,a.jsx)("p",{className:"px-4 mb-1 text-sm text-pink-500",children:p.password}),(0,a.jsxs)("button",{className:"bg-gradient-to-tr mt-5 from-indigo-300 to-pink-100 hover:from-indigo-200 hover:to-pink-50 rounded-full p-0.5 my-2",children:[(0,a.jsx)("div",{className:"bg-black rounded-full text-sm px-4 py-3",children:"Get Started"}),v&&(0,a.jsx)("p",{className:"mt-2 text-sm text-pink-500 text-center",children:v})]})]})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=9139,e(e.s=t);var t}));var t=e.O();_N_E=t}]);