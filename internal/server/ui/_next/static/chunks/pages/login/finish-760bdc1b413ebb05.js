(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{4283:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login/finish",function(){return t(1334)}])},5876:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(5893);function s(e){var r=e.children;return(0,n.jsx)("div",{className:"w-full min-h-full flex flex-col justify-center",children:(0,n.jsxs)("div",{className:"flex flex-col w-full max-w-xs mx-auto justify-center items-center my-8 px-5 pt-8 pb-4 border rounded-lg border-gray-800",children:[(0,n.jsx)("div",{className:"border border-violet-200/25 rounded-full p-2.5 mb-4",children:(0,n.jsx)("img",{className:"w-12 h-12",src:"/infra-color.svg"})}),r]})})}},1334:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var n=t(4051),s=t.n(n),a=t(5893),o=t(1163),i=t(7294),l=t(8100),u=t(5876);function c(e,r,t,n,s,a,o){try{var i=e[a](o),l=i.value}catch(u){return void t(u)}i.done?r(l):Promise.resolve(l).then(n,s)}function d(e){return function(){var r=this,t=arguments;return new Promise((function(n,s){var a=e.apply(r,t);function o(e){c(a,n,s,o,i,"next",e)}function i(e){c(a,n,s,o,i,"throw",e)}o(void 0)}))}}function f(){var e=(0,o.useRouter)(),r=(0,i.useState)(""),t=r[0],n=r[1],u=(0,i.useState)(""),c=u[0],f=u[1],x=(0,l.kY)().mutate,p=e.query.id;function m(){return(m=d(s().mark((function r(n){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,r.next=4,fetch("/v1/identities/".concat(p),{method:"PUT",body:JSON.stringify({password:t})});case 4:return r.next=6,x("/v1/identities/self");case 6:e.replace("/"),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),f(r.t0.message||"invalid password"),f("Invalid password");case 13:return r.abrupt("return",!1);case 14:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}return p||e.replace("/login"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"text-base leading-snug font-bold",children:"Login to Infra"}),(0,a.jsxs)("h2",{className:"text-xs text-center max-w-[260px] my-3 text-gray-300",children:["You've used a one time password.",(0,a.jsx)("br",{}),"Set your new password to continue."]}),(0,a.jsxs)("form",{onSubmit:function(e){return m.apply(this,arguments)},className:"flex flex-col w-full max-w-sm relative",children:[(0,a.jsxs)("div",{className:"w-full my-4",children:[(0,a.jsx)("label",{htmlFor:"password",className:"text-3xs text-gray-500 uppercase",children:"New Password"}),(0,a.jsx)("input",{required:!0,name:"password",type:"password",placeholder:"enter your new password",onChange:function(e){n(e.target.value),f("")},className:"w-full bg-transparent border-b border-gray-800 text-2xs px-px py-3 focus:outline-none focus:border-b focus:ring-gray-200 placeholder:italic ".concat(c?"border-pink-500/60":"")})]}),(0,a.jsx)("button",{disabled:!t,className:"border border-violet-300 hover:border-violet-100 my-2 text-2xs px-4 py-3 rounded-lg disabled:pointer-events-none text-violet-100 disabled:opacity-30",children:"Finish"}),c&&(0,a.jsx)("p",{className:"absolute -bottom-3.5 w-full mx-auto text-2xs text-pink-400 text-center",children:c})]})]})}f.layout=function(e){return(0,a.jsx)(u.Z,{children:e})}}},function(e){e.O(0,[774,888,179],(function(){return r=4283,e(e.s=r);var r}));var r=e.O();_N_E=r}]);