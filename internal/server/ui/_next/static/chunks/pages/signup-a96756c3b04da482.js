(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{9139:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return n(3006)}])},5686:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893);function s(e){var t=e.message,n=e.center,s=void 0!==n&&n;return(0,r.jsx)("p",{className:"".concat(s?"mt-2 text-center":"px-4 mb-1"," text-sm text-pink-500"),children:t})}},1431:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893);function s(e){var t=e.iconPath,n=e.size,s=void 0===n?8:n,a=e.position;return(0,r.jsx)("div",{className:"flex items-center justify-center bg-gradient-to-br from-violet-400/30 to-pink-200/30 rounded-full ".concat("center"===a?"mx-auto my-4":""),children:(0,r.jsx)("div",{className:"flex bg-black items-center justify-center rounded-full w-16 h-16 m-0.5",children:(0,r.jsx)("img",{className:"w-".concat(s," h-").concat(s),src:t})})})}},3006:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(4051),s=n.n(r),a=n(5893),o=n(7294),i=n(8100),c=n(1163),u=n(1431),l=n(5686);function f(e,t,n,r,s,a,o){try{var i=e[a](o),c=i.value}catch(u){return void n(u)}i.done?t(c):Promise.resolve(c).then(r,s)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){f(a,r,s,o,i,"next",e)}function i(e){f(a,r,s,o,i,"throw",e)}o(void 0)}))}}function m(){var e=(0,i.kY)().mutate,t=(0,c.useRouter)(),n=(0,o.useState)(""),r=n[0],f=n[1],m=(0,o.useState)(""),p=m[0],x=m[1],v=(0,o.useState)(""),h=v[0],b=v[1],g=(0,o.useState)({}),w=g[0],y=g[1];function k(){return(k=d(s().mark((function n(a){var o,i,c,u,l,f,d,m;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),y({}),b(""),n.prev=3,n.next=6,fetch("/v1/signup",{method:"POST",body:JSON.stringify({email:r,password:p})});case 6:if((o=n.sent).ok){n.next=11;break}return n.next=10,o.json();case 10:throw n.sent;case 11:return n.next=13,fetch("/v1/login",{method:"POST",body:JSON.stringify({passwordCredentials:{email:r,password:p}})});case 13:if((o=n.sent).ok){n.next=18;break}return n.next=17,o.json();case 17:throw n.sent;case 18:e("/v1/identities/self",{optimisticData:{name:r}}),e("/v1/signup",{optimisticData:{enabled:!1}}),t.replace("/"),n.next=48;break;case 23:if(n.prev=23,n.t0=n.catch(3),!n.t0.fieldErrors){n.next=47;break}for(i={},c=!0,u=!1,l=void 0,n.prev=28,f=n.t0.fieldErrors[Symbol.iterator]();!(c=(d=f.next()).done);c=!0)m=d.value,i[m.fieldName.toLowerCase()]=m.errors[0]||"invalid value";n.next=36;break;case 32:n.prev=32,n.t1=n.catch(28),u=!0,l=n.t1;case 36:n.prev=36,n.prev=37,c||null==f.return||f.return();case 39:if(n.prev=39,!u){n.next=42;break}throw l;case 42:return n.finish(39);case 43:return n.finish(36);case 44:y(i),n.next=48;break;case 47:b(n.t0.message);case 48:return n.abrupt("return",!1);case 49:case"end":return n.stop()}}),n,null,[[3,23],[28,32,36,44],[37,,39,43]])})))).apply(this,arguments)}return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-full w-full max-w-md mx-auto mb-48",children:[(0,a.jsx)(u.Z,{size:12,iconPath:"/infra-color.svg"}),(0,a.jsx)("h1",{className:"mt-5 text-base font-bold",children:"Welcome to Infra"}),(0,a.jsxs)("h2",{className:"text-sm text-center max-w-xs my-2 text-gray-300",children:["You've successfully installed Infra.",(0,a.jsx)("br",{}),"Set up your admin user to get started."]}),(0,a.jsxs)("form",{onSubmit:function(e){return k.apply(this,arguments)},className:"flex flex-col w-full max-w-sm my-8",children:[(0,a.jsx)("input",{autoFocus:!0,type:"email",placeholder:"Email",onChange:function(e){return f(e.target.value)},className:"bg-purple-100/5 border border-zinc-800 text-sm px-5 mt-2 py-3 rounded-full focus:outline-none focus:ring focus:ring-cyan-600 ".concat(w.email?"border-pink-500":"")}),w.email&&(0,a.jsx)(l.Z,{message:w.email}),(0,a.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){return x(e.target.value)},className:"bg-purple-100/5 border border-zinc-800 text-sm px-5 mt-2 py-3 rounded-full focus:outline-none focus:ring focus:ring-cyan-600 ".concat(w.password?"border-pink-500":"")}),w.password&&(0,a.jsx)(l.Z,{message:w.password}),(0,a.jsxs)("button",{className:"bg-gradient-to-tr mt-5 from-indigo-300 to-pink-100 hover:from-indigo-200 hover:to-pink-50 rounded-full p-0.5 my-2",children:[(0,a.jsx)("div",{className:"bg-black rounded-full text-sm px-4 py-3",children:"Get Started"}),h&&(0,a.jsx)(l.Z,{message:h,center:!0})]})]})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=9139,e(e.s=t);var t}));var t=e.O();_N_E=t}]);