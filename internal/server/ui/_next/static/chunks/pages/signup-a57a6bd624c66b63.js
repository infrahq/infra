(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{9139:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return n(3006)}])},3006:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(4051),s=n.n(r),c=n(5893),a=n(7294),i=n(9669),u=n.n(i),o=n(1664),l=n(8100),f=n(1163);function h(e,t,n,r,s,c,a){try{var i=e[c](a),u=i.value}catch(o){return void n(o)}i.done?t(u):Promise.resolve(u).then(r,s)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var c=e.apply(t,n);function a(e){h(c,r,s,a,i,"next",e)}function i(e){h(c,r,s,a,i,"throw",e)}a(void 0)}))}}function x(e){var t=e.signup;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:"text-center my-4",children:"Infra has been successfully installed."}),(0,c.jsx)("button",{className:"w-full my-3 bg-zinc-500/20 hover:bg-gray-500/25 py-2.5 rounded-md text-white text-md hover:cursor-pointer",onClick:function(){return t()},children:"Next"})]})}function d(e){var t=e.accessKey,n=(0,l.kY)().mutate,r=(0,f.useRouter)();function a(){return(a=m(s().mark((function e(){var c,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/v1/login",{method:"POST",body:JSON.stringify({accessKey:t})});case 2:return c=e.sent,e.next=5,c.json();case 5:a=e.sent.name,n("/v1/introspect",{optimisticData:{name:a}}),n("/v1/setup",{optimisticData:{required:!1}}),r.replace("/");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:"text-center text-gray-400 mt-12",children:"This is your admin key. Please back it up in a safe place."}),(0,c.jsx)("h3",{className:"font-mono text-2xl text-white mt-4 mb-12",children:t}),(0,c.jsx)(o.default,{href:"/",children:(0,c.jsx)("a",{className:"self-stretch",children:(0,c.jsx)("button",{className:"w-full my-3 bg-zinc-500/20 hover:bg-gray-500/25 py-2.5 rounded-md text-white text-md hover:cursor-pointer",onClick:function(){return function(){return a.apply(this,arguments)}()},children:"Get Started"})})})]})}function p(){var e=(0,a.useState)(""),t=e[0],n=e[1];function r(){return(r=m(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().post("/v1/setup");case 3:t=e.sent,r=t.data.accessKey,n(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return(0,c.jsxs)("div",{className:"flex flex-col justify-center items-center h-full w-full max-w-md mx-auto mb-48",children:[(0,c.jsx)("img",{className:"text-white w-10 h-10",src:"/infra-icon.svg"}),(0,c.jsx)("h1",{className:"my-5 text-3xl font-light tracking-tight",children:"Welcome to Infra"}),t?(0,c.jsx)(d,{accessKey:t}):(0,c.jsx)(x,{signup:function(){return r.apply(this,arguments)}})]})}}},function(e){e.O(0,[321,669,774,888,179],(function(){return t=9139,e(e.s=t);var t}));var t=e.O();_N_E=t}]);