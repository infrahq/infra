(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{3733:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(6483)}])},3850:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(4051),i=t.n(r),o=t(5893),s=t(1664),a=t(1163),c=t(8100);function l(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){l(o,r,i,s,a,"next",e)}function a(e){l(o,r,i,s,a,"throw",e)}s(void 0)}))}}var d=[{name:"Infrastructure",href:"/destinations",icon:"/infrastructure.svg"},{name:"Identities",href:"/identities",icon:"/identities.svg"},{name:"Identity Providers",href:"/providers",icon:"/providers.svg"}];function f(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")}function h(e){var n,t=e.children,r=(0,a.useRouter)(),l=(0,c.ZP)("/v1/introspect").data,h=(0,c.kY)().mutate;function m(){return(m=u(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/v1/logout",{method:"POST"}),h("/v1/introspect",void 0),r.replace("/");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.jsxs)("div",{className:"flex h-full relative",children:[(0,o.jsxs)("nav",{className:"flex-none flex w-64 lg:w-72 flex-col inset-y-0 px-2 overflow-y-auto",children:[(0,o.jsx)("div",{className:"flex-shrink-0 flex items-center my-12 px-6",children:(0,o.jsx)(s.default,{href:"/",children:(0,o.jsx)("a",{children:(0,o.jsx)("img",{className:"h-4 w-auto",src:"infra.svg",alt:"Infra"})})})}),(0,o.jsx)("div",{className:"flex-1 space-y-1 px-4",children:d.map((function(e){return(0,o.jsx)(s.default,{href:e.href,children:(0,o.jsxs)("a",{href:e.href,className:f(r.asPath.startsWith(e.href)?"bg-purple-200/20 text-purple-100 font-bold":"text-gray-400 hover:bg-zinc-900 hover:text-gray-300","group rounded-md py-[7px] px-2 flex items-center text-sm font-medium"),children:[(0,o.jsx)("img",{src:e.icon,className:f(r.asPath.startsWith(e.href)?"":"opacity-50","mr-3 flex-shrink-0 h-5 w-5"),"aria-hidden":"true"}),e.name]})},e.name)}))}),(0,o.jsxs)("div",{className:"relative group mx-2 my-5 h-16 hover:h-28 hover:bg-purple-100/5 transition-height transition-size px-4 duration-300 ease-in-out rounded-xl overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4 my-4",children:[(0,o.jsx)("div",{className:"bg-purple-100/10 flex-none flex items-center justify-center w-9 h-9 py-1.5 rounded-lg capitalize font-bold select-none",children:null===l||void 0===l||null===(n=l.name)||void 0===n?void 0:n[0]}),(0,o.jsx)("div",{onClick:function(){a.default.push({pathname:"/settings"},void 0,{shallow:!0})},className:"text-gray-300 text-sm font-medium overflow-hidden overflow-ellipsis cursor-pointer",children:null===l||void 0===l?void 0:l.name})]}),(0,o.jsx)("div",{className:"absolute group w-full px-2 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-sm",children:(0,o.jsxs)("div",{onClick:function(){return function(){return m.apply(this,arguments)}()},className:"w-full flex opacity-50 hover:opacity-75 py-2 cursor-pointer",children:[(0,o.jsx)("img",{src:"/signout.svg",className:"opacity-50 group-hover:opacity-75 mr-3"}),(0,o.jsx)("div",{className:"text-purple-50/40 group-hover:text-purple-50",children:"Logout"})]})})]})]}),(0,o.jsx)("main",{className:"w-full px-4 mx-auto xl:max-w-4xl 2xl:max-w-5xl overflow-x-hidden overflow-y-scroll",children:t})]})}},5869:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893);function i(e){var n=e.label,t=e.type,i=e.value,o=e.placeholder,s=e.hasDropdownSelection,a=void 0===s||s,c=e.optionType,l=e.options,u=e.handleInputChange,d=e.handleSelectOption,f=e.handleKeyDown;return(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-white",children:n}),(0,r.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,r.jsx)("input",{type:t,value:i,className:"block w-full px-4 py-2 sm:text-sm border border-gray-500 rounded bg-transparent required:border-red-500 focus:outline-none",placeholder:o,onChange:u,onKeyDown:f}),a&&(0,r.jsxs)("div",{className:"absolute inset-y-0 right-2 flex items-center",children:[(0,r.jsx)("label",{htmlFor:c,className:"sr-only",children:c}),(0,r.jsx)("select",{id:c,name:c,onChange:d,className:"focus:outline-none h-full py-0 pl-2 pr-1 border-transparent bg-transparent text-gray-500 sm:text-sm rounded-md",children:l.map((function(e){return(0,r.jsx)("option",{value:e,children:e},e)}))})]})]})]})}},6483:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return v}});var r=t(5893),i=t(2125),o=t(7294),s=t(8100),a=t(3850),c=t(5869);function l(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function u(){var e=l(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: 85% auto;\n  gap: 5px;\n  box-sizing: border-box;\n\n  max-width: 30rem;\n"]);return u=function(){return e},e}function d(){var e=l(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: 1fr min-content;\n  box-sizing: border-box;\n\n  max-width: 27rem;\n"]);return d=function(){return e},e}function f(){var e=l(["\n  & > *:first-child {\n    padding-top: 2rem;\n  }\n\n  & > *:not(:first-child) {\n    padding-top: 1rem;\n  }\n"]);return f=function(){return e},e}var h=i.ZP.div.withConfig({componentId:"sc-ad030016-0"})(u()),m=i.ZP.div.withConfig({componentId:"sc-ad030016-1"})(d()),p=i.ZP.div.withConfig({componentId:"sc-ad030016-2"})(f()),x=function(e){var n=e.id,t=(0,s.ZP)("/v1/identities/".concat(n),{fallbackData:{name:""}}).data;return(0,r.jsx)("p",{children:t.name})};function v(){var e=(0,s.kY)().mutate,n=(0,s.ZP)((function(){return"/v1/grants?resource=infra"}),{fallbackData:[]}).data,t=(0,o.useState)(""),i=t[0],l=t[1],u=function(n){fetch("/v1/grants",{method:"POST",body:JSON.stringify({subject:n,resource:"infra",privilege:"admin"})}).then((function(){e("/v1/grants?resource=infra"),l("")})).catch((function(e){console.log(e)}))},d=function(){fetch("/v1/identities?name=".concat(i)).then((function(e){return e.json()})).then((function(e){0===e.length?fetch("/v1/identities",{method:"POST",body:JSON.stringify({name:i,kind:"user"})}).then((function(e){return e.json()})).then((function(e){u(e.id)})).catch((function(e){console.log(e)})):u(e[0].id)}))};return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)("div",{children:"Admins"}),(0,r.jsx)("p",{children:"These  users have full administration privileges"}),(0,r.jsxs)(h,{children:[(0,r.jsx)(c.Z,{type:"email",value:i,placeholder:"email",hasDropdownSelection:!1,handleInputChange:function(e){return l(e.target.value)},handleKeyDown:function(e){"Enter"===e.key&&i.length>0&&d()}}),(0,r.jsx)("button",{onClick:function(){return d()},disabled:0===i.length,type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-black text-white font-medium hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Add"})]}),n&&n.length>0&&(0,r.jsx)(p,{children:n.map((function(n){return(0,r.jsx)("div",{children:(0,r.jsxs)(m,{children:[(0,r.jsx)(x,{id:n.subject}),(0,r.jsx)("div",{className:"cursor-pointer",onClick:function(){return t=n.id,void fetch("/v1/grants/".concat(t),{method:"DELETE"}).then((function(){e("/v1/grants?resource=infra")})).catch((function(e){console.log(e)}));var t},children:"\u2715"})]})},n.id)}))})]})}}},function(e){e.O(0,[321,125,774,888,179],(function(){return n=3733,e(e.s=n);var n}));var n=e.O();_N_E=n}]);