(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{2758:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/identities",function(){return n(8279)}])},3850:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(4051),s=n.n(r),i=n(5893),a=n(1664),l=n(1163),o=n(8100);function c(e,t,n,r,s,i,a){try{var l=e[i](a),o=l.value}catch(c){return void n(c)}l.done?t(o):Promise.resolve(o).then(r,s)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){c(i,r,s,a,l,"next",e)}function l(e){c(i,r,s,a,l,"throw",e)}a(void 0)}))}}var u=[{name:"Infrastructure",href:"/destinations",icon:"/infrastructure.svg"},{name:"Identities",href:"/identities",icon:"/identities.svg"},{name:"Identity Providers",href:"/providers",icon:"/providers.svg"}];function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function f(e){var t,n=e.children,r=(0,l.useRouter)(),c=(0,o.ZP)("/v1/introspect").data,f=(0,o.kY)().mutate;function x(){return(x=d(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/v1/logout",{method:"POST"}),f("/v1/introspect",void 0),r.replace("/");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.jsxs)("div",{className:"flex h-full relative",children:[(0,i.jsxs)("nav",{className:"flex-none flex w-64 lg:w-72 flex-col inset-y-0 px-2 overflow-y-auto",children:[(0,i.jsx)("div",{className:"flex-shrink-0 flex items-center my-12 px-6",children:(0,i.jsx)(a.default,{href:"/",children:(0,i.jsx)("a",{children:(0,i.jsx)("img",{className:"h-4 w-auto",src:"infra.svg",alt:"Infra"})})})}),(0,i.jsx)("div",{className:"flex-1 space-y-1 px-4",children:u.map((function(e){return(0,i.jsx)(a.default,{href:e.href,children:(0,i.jsxs)("a",{href:e.href,className:m(r.asPath.startsWith(e.href)?"bg-purple-200/20 text-purple-100 font-bold":"text-gray-400 hover:bg-zinc-900 hover:text-gray-300","group rounded-md py-[7px] px-2 flex items-center text-sm font-medium"),children:[(0,i.jsx)("img",{src:e.icon,className:m(r.asPath.startsWith(e.href)?"":"opacity-50","mr-3 flex-shrink-0 h-5 w-5"),"aria-hidden":"true"}),e.name]})},e.name)}))}),(0,i.jsxs)("div",{className:"relative group mx-2 my-5 h-16 hover:h-28 hover:bg-purple-100/5 transition-height transition-size px-4 duration-300 ease-in-out rounded-xl overflow-hidden",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4 my-4",children:[(0,i.jsx)("div",{className:"bg-purple-100/10 flex-none flex items-center justify-center w-9 h-9 py-1.5 rounded-lg capitalize font-bold select-none",children:null===c||void 0===c||null===(t=c.name)||void 0===t?void 0:t[0]}),(0,i.jsx)("div",{onClick:function(){l.default.push({pathname:"/settings"},void 0,{shallow:!0})},className:"text-gray-300 text-sm font-medium overflow-hidden overflow-ellipsis cursor-pointer",children:null===c||void 0===c?void 0:c.name})]}),(0,i.jsx)("div",{className:"absolute group w-full px-2 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-sm",children:(0,i.jsxs)("div",{onClick:function(){return function(){return x.apply(this,arguments)}()},className:"w-full flex opacity-50 hover:opacity-75 py-2 cursor-pointer",children:[(0,i.jsx)("img",{src:"/signout.svg",className:"opacity-50 group-hover:opacity-75 mr-3"}),(0,i.jsx)("div",{className:"text-purple-50/40 group-hover:text-purple-50",children:"Logout"})]})})]})]}),(0,i.jsx)("main",{className:"w-full px-4 mx-auto xl:max-w-4xl 2xl:max-w-5xl overflow-x-hidden overflow-y-scroll",children:n})]})}},1399:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5893),s=n(7294),i=n(6727),a=n(8771);function l(e){var t=e.open,n=e.setOpen,l=e.onSubmit,o=e.title,c=e.message,d=(0,s.useRef)(null);return(0,r.jsx)(i.uT.Root,{show:t,as:s.Fragment,children:(0,r.jsx)(i.Vq,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:d,onClose:n,children:(0,r.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)(i.uT.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(i.Vq.Overlay,{className:"fixed inset-0 bg-black bg-opacity-75 transition-opacity"})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,r.jsx)(i.uT.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,r.jsx)("div",{className:"relative inline-block bg-gradient-to-tr from-[#B06363] to-[#FF00C7] rounded-3xl text-left overflow-hidden shadow-xl transform transition-all my-8 align-middle max-w-2xl w-full p-px",children:(0,r.jsxs)("div",{className:"bg-black px-10 pt-12 pb-8 rounded-3xl",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"rounded-full bg-gradient-to-tr from-[#B06363] to-[#FF00C7]",children:(0,r.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-black m-0.5",children:(0,r.jsx)(a.Z,{className:"h-6 w-6 text-[#D3398F]","aria-hidden":"true"})})}),(0,r.jsxs)("div",{className:"mt-1 ml-5 text-left",children:[(0,r.jsx)(i.Vq.Title,{as:"h3",className:"text-base leading-6 font-bold text-white",children:o}),(0,r.jsx)("p",{className:"text-sm text-gray-400 my-0.5",children:c})]})]}),(0,r.jsxs)("div",{className:"mt-8 text-sm flex flex-row-reverse",children:[(0,r.jsx)("button",{type:"button",className:"w-auto inline-flex justify-center rounded-full bg-gradient-to-tr from-[#B06363] to-[#FF00C7] font-medium text-white focus:outline-none focus:ring-2 focus:ring-[#FF00C7] ml-3",onClick:function(){return l()},children:(0,r.jsx)("div",{className:"bg-black px-10 py-3.5 rounded-full m-0.5",children:"Delete"})}),(0,r.jsx)("button",{type:"button",className:"w-auto inline-flex items-center justify-center rounded-full px-10 py-3.5 bg-black hover:opacity-75 font-medium text-white focus:outline-none focus:ring-2 focus:ring-zinc-600",onClick:function(){return n(!1)},ref:d,children:"Cancel"})]})]})})})]})})})}},5857:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5893);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function a(e){var t=e.getTableProps,n=e.getTableBodyProps,s=e.headerGroups,a=e.rows,l=e.prepareRow;return(0,r.jsxs)("table",i({className:"w-full table-auto"},t(),{children:[(0,r.jsx)("thead",{className:"border-b border-zinc-800",children:s.map((function(e){return(0,r.jsx)("tr",i({},e.getHeaderGroupProps(),{children:e.headers.map((function(e){return(0,r.jsx)("th",i({className:"text-left uppercase py-2 font-normal text-sm text-gray-400"},e.getHeaderProps(),{children:e.render("Header")}),e.id)}))}),e.id)}))}),(0,r.jsx)("tbody",i({},n(),{children:a.map((function(e){return l(e),(0,r.jsx)("tr",i({className:"text-sm group"},e.getRowProps(),{children:e.cells.map((function(e){return(0,r.jsx)("td",i({className:"py-1 group-first:pt-3"},e.getCellProps(),{children:e.render("Cell")}),e.id)}))}),e.id)}))}))]}))}},8279:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(4051),s=n.n(r),i=n(5893),a=n(8100),l=n(9521),o=n(7294),c=n(7484),d=n.n(c),u=n(6727);var m=o.forwardRef((function(e,t){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"}))})),f=n(5506),x=n(3850),p=n(5857),h=n(1399);function v(e,t,n,r,s,i,a){try{var l=e[i](a),o=l.value}catch(c){return void n(c)}l.done?t(o):Promise.resolve(o).then(r,s)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){v(i,r,s,a,l,"next",e)}function l(e){v(i,r,s,a,l,"throw",e)}a(void 0)}))}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}var j=[{Header:"Identity",accessor:"name",Cell:function(e){var t,n=e.value;return(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-9 h-9 mr-4 bg-purple-100/10 font-bold rounded-lg flex items-center justify-center",children:null===(t=n[0])||void 0===t?void 0:t.toUpperCase()}),(0,i.jsx)("div",{children:n})]})}},{Header:"Kind",accessor:"kind"},{id:"last_seen",accessor:function(e){return e.lastSeenAt?d()(e.lastSeenAt).fromNow():"never"},Header:function(){return(0,i.jsx)("div",{className:"text-left",children:"Last Seen"})},Cell:function(e){var t=e.value;return(0,i.jsx)("div",{className:"text-left",children:t})}},{id:"delete",accessor:function(e){return e},Cell:function(e){var t=e.value,n=(0,o.useState)(!1),r=n[0],s=n[1];return(0,i.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 flex justify-end text-right",children:[(0,i.jsx)("button",{onClick:function(){return s(!0)},className:"p-2 -mr-2 cursor-pointer",children:(0,i.jsx)(f.Z,{className:"w-5 h-5 text-gray-500"})}),(0,i.jsx)(h.Z,{open:r,setOpen:s,title:"Delete Identity",message:(0,i.jsxs)(i.Fragment,{children:["Are you sure you want to delete ",(0,i.jsx)("span",{className:"font-bold",children:t.name}),"? This action cannot be undone."]})})]})}}];function w(e){var t=e.open,n=e.setOpen,r=(0,o.useRef)(null),a=(0,o.useState)(""),l=a[0],c=a[1];return(0,i.jsx)(u.uT.Root,{show:t,as:o.Fragment,children:(0,i.jsx)(u.Vq,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:r,onClose:n,children:(0,i.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,i.jsx)(u.uT.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)(u.Vq.Overlay,{className:"fixed inset-0 bg-black bg-opacity-75 transition-opacity"})}),(0,i.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,i.jsx)(u.uT.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,i.jsxs)("div",{className:"relative inline-block align-bottom bg-zinc-900 rounded-lg px-6 pt-4 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[(0,i.jsx)("h1",{className:"text-2xl text-white font-bold tracking-tight text-center mt-2 mb-6",children:"Add Identity"}),function(){function e(){return(e=y(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/v1/identities",{method:"POST",body:JSON.stringify({name:l})});case 3:return n=e.sent,console.log(n),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.jsxs)("form",{onSubmit:function(t){return e.apply(this,arguments)},className:"flex flex-col space-y-4 mx-8",children:[(0,i.jsx)("div",{className:"flex flex-col w-full space-y-4 my-8",children:(0,i.jsx)("input",{onChange:function(e){return c(e.target.value)},ref:r,placeholder:"user@example.com",className:"bg-zinc-800 border border-zinc-700 text-base px-4 py-2 rounded-lg focus:outline-none focus:ring focus:ring-cyan-600"})}),(0,i.jsxs)("div",{className:"mt-5 flex items-center justify-end space-x-4",children:[(0,i.jsx)("button",{type:"button",className:"mt-3 inline-flex justify-center rounded-md bg-zinc-800 border border-zinc-700 shadow-sm px-6 py-2 text-base font-medium text-gray-300 hover:bg-gray-zinc-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:function(){return n(!1)},children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"block bg-gradient-to-tr from-indigo-300 to-pink-100 hover:from-indigo-200 hover:to-pink-50 rounded-lg p-0.5 my-2",children:(0,i.jsx)("div",{className:"bg-black rounded-lg flex justify-center items-center tracking-tight px-8 py-2 ",children:"Add Identity"})})]})]})}()]})})]})})})}function N(){var e,t=(0,a.ZP)("/v1/identities",{fallbackData:[]}),n=t.data,r=t.error,s=(0,o.useState)(!1),c=s[0],d=s[1],u=r?[]:n,f=(0,l.useTable)({columns:j,data:u});return(0,i.jsx)(x.Z,{children:(0,i.jsxs)("div",{className:"flex flex-col my-20",children:[(0,i.jsxs)("header",{className:"flex items-center",children:[(0,i.jsx)("h1",{className:"text-4xl flex-1 font-bold my-8",children:"Identities"}),(0,i.jsx)("button",{onClick:function(){return d(!0)},className:"bg-gradient-to-tr from-indigo-300 to-pink-100 hover:from-indigo-200 hover:to-pink-50 rounded-full p-0.5 my-2",children:(0,i.jsxs)("div",{className:"bg-black rounded-full flex items-center tracking-tight px-4 py-2 ",children:[(0,i.jsx)(m,{className:"w-5 h-5 mr-2"}),"Add Identity"]})})]}),(null===r||void 0===r?void 0:r.status)?(0,i.jsx)("div",{className:"my-20 text-center font-light text-gray-400 text-2xl",children:null===r||void 0===r||null===(e=r.info)||void 0===e?void 0:e.message}):0===n.length?(0,i.jsx)("p",{children:"No identities"}):(0,i.jsx)(p.Z,b({},f)),(0,i.jsx)(w,{open:c,setOpen:d})]})})}}},function(e){e.O(0,[727,870,774,888,179],(function(){return t=2758,e(e.s=t);var t}));var t=e.O();_N_E=t}]);